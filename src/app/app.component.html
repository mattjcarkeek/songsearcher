<main class="main">
  <h1>{{ title }}</h1>
  <div class="search-container">
    <input #searchInput type="text" placeholder="Search for songs" class="search-input" 
           (keyup.enter)="searchSongs(searchInput.value)">
    <button (click)="searchSongs(searchInput.value)" 
            [disabled]="isSearching" 
            class="search-button">
      {{ isSearching ? 'Searching...' : 'Search' }}
    </button>
  </div>
  <div class="content-container">
    <div class="search-results">
      @for (song of searchResults; track song.name) {
        <div class="song-item">
          <img [src]="song.albumCover" alt="Album cover" class="album-cover">
          <div class="song-details">
            <h3>{{ song.name }}</h3>
            <p>{{ song.artists }}</p>
            <p class="playlist-info">Found in: {{ song.playlists.join(', ') }}</p>
            @for (playlist of song.playlists; track playlist) {
              <button (click)="deleteSong(song, playlist)" 
                      [disabled]="isSearching" 
                      class="delete-button">Delete from {{ playlist }}</button>
            }
            <button (click)="deleteFromAllLists(song)" 
                    [disabled]="isSearching" 
                    class="delete-all-button">Delete from all lists</button>
          </div>
        </div>
      }
    </div>
    @if (deletedSongs.length > 0) {
      <div class="deleted-songs-column">
        <h2>Deleted Songs</h2>
        <ul>
          @for (item of deletedSongs; track item.song.id) {
            <li>
              <img [src]="item.song.albumCover" alt="Album cover" class="album-cover-small">
              <div>
                <strong>{{ item.song.name }}</strong>
                <p>{{ item.song.artists }}</p>
                <p>Deleted from: {{ item.playlists.join(', ') }}</p>
              </div>
            </li>
          }
        </ul>
      </div>
    }
  </div>
</main>

<router-outlet></router-outlet>
